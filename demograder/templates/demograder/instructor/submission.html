{% extends "demograder/base.html" %}

{% block breadcrumb %}
<!-- begin demograder/instructor/submission.html:breadcrumb -->
<a href="{% url 'instructor_index' %}">Instructor Home</a>
&gt;
<a href="{% url 'instructor_course' project.course.id %}">{{ project.course.catalog_id }}</a>
&gt;
<a href="{% url 'instructor_assignment' project.id %}">{{ project.assignment }}</a>:
&gt;
<a href="{% url 'instructor_project' project.id %}">{{ project.name }}</a>
&gt;
<a href="{% url 'instructor_submission' submission.id %}">{{ project.name }}</a>
<!-- end demograder/instructor/submission.html:breadcrumb -->
{% endblock %}

{% block content %}
<!-- begin demograder/instructor/submission.html:content -->
<h2>{{ submission.student.full_name }} on {{ submission.isoformat }}</h2>

<h3>
	<a href="{% url 'instructor_project' project.id %}">{{ project.name }}</a>:
	{{ submission.score }}/{{ submission.max_score }}
</h3>

<p>
	Uploads:
	{% for upload in submission.upload_set.all %}
		{% if not forloop.first %},{% endif %}
		<a href="{% url 'display' upload.id %}">{{ upload.basename }}</a>
	{% endfor %}
</p>

{% if results %}
	<div id="scoreboard">
		{% for result in submission.result_set.all %}
			{% if result.return_code == None %}
				<a class="score tbd" href="{% url 'result' result.id %}">TBD</a>
			{% elif result.return_code == 0 %}
				<a class="score pass" href="{% url 'result' result.id %}">Pass</a>
			{% else %}
				<a class="score fail" href="{% url 'result' result.id %}">Fail</a>
			{% endif %}
		{% endfor %}
	</div>
{% else %}
	There are no results associated with this submission.
{% endif %}

<h3 id="history-heading">
	Submission History for <a href="{% url 'instructor_student' submission.student.id %}">{{ submission.student.name }}</a>
</h3>
<div id="history">
	<table>
		<tr>
			<th>Date/Time</th>
			<th>File(s)</th>
			<th>Tests Passed</th>
		</tr>
		{% for submission in submissions %}
		<tr>
			<td><a href="{% url 'instructor_submission' submission.id %}">{{ submission.us_format }}</a></td>
			<td>
				{% for upload in submission.upload_set.all %}
					{% if not forloop.first %},{% endif %}
					<a href="{% url 'display' upload.id %}">{{ upload.basename }}</a>
				{% endfor %}
			</td>
			<td>
				{% if submission.max_score %}
					{{ submission.score }}/{{ submission.max_score }}
				{% else %}
					N/A
				{% endif %}
			</td>
		</tr>
		{% endfor %}
	</table>
</div>
<!-- end demograder/instructor/submission.html:content -->
{% endblock %}
