{% extends "demograder/base.html" %}

{% block breadcrumb %}
<!-- begin demograder/result.html:breadcrumb -->
<a href="{% url 'index' %}">Home</a>
&gt;
<a href="{% url 'course' project.course.id %}">{{ project.course.catalog_id_str }}</a>
&gt;
<a href="{% url 'project' project.id %}">{{ project.name }}</a>
&gt;
<a href="{% url 'result' result.id %}">{{ result.submission.us_format }} Submission</a>
<!-- end demograder/result.html:breadcrumb -->
{% endblock %}

{% block content %}
<!-- begin demograder/result.html:content -->
<h2>Results for {{ result.submission.us_format }} Submission</h2>

<h3>Files Submitted</h3>
	<ul>
		{% for upload in result.submission.upload_set.all %}
			{% if user.is_superuser %}
				<li><a href="{% url 'display' upload.id %}">{{ upload.basename }}</a></li>
			{% else %}
				<li><a href="{% url 'download' upload.id %}">{{ upload.basename }}</a></li>
			{% endif %}
		{% endfor %}
	</ul>

<h3>Other Files Used in Test</h3>
	<ul>
		{% for dependency in result.resultdependency_set.all %}
			{% for upload in dependency.producer.upload_set.all %}
				{% if user.is_superuser %}
					<li><a href="{% url 'display' upload.id %}">{{ upload.basename }}</a></li>
				{% else %}
					<li><a href="{% url 'download' upload.id %}">{{ upload.basename }}</a></li>
				{% endif %}
			{% endfor %}
		{% endfor %}
	</ul>

{% if result.return_code == None%}
	<h3>Result to be determined</h3>
{% else %}
	<h3>
		Result: 
		{% if result.return_code == 0 %}
			Pass
		{% else %}
			Fail
		{% endif %}
	</h3>
	Output:
	<pre>
{{ result.stdout}}
{{ result.stderr}}

{% if result.return_code == 0 %}
pass
{% else %}
FAIL
{% endif %}
	</pre>
{% endif %}


<!-- end demograder/result.html:content -->
{% endblock %}
